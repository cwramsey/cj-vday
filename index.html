<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<style type="text/css">

/* The page body */
html, body {
  background: #333;
  overflow: hidden;
  font-family: Helvetica, Arial, sans-serif;
}

/* The div holding the wooden table img tag */
#wooden-table {
  position: absolute;
  left: -5000px;
}

/* The light table itself */
#lighttable {
  position: relative;
  width: 800px;
  height: 450px;
  background: #eee url(images/wooden-table.jpg);
  padding: 70px;
  margin: 0 auto;
  border: 20px solid #111;
  display: none;
}

/* Photos on the light table */
#lighttable img {
  border: 10px solid #fff;
  box-shadow: 0 0 1em rgba(0, 0, 0, 0.9);
  -moz-box-shadow: 0 0 1em rgba(0, 0, 0, 0.9);
  -webkit-box-shadow: 0 0 1em rgba(0, 0, 0, 0.9);
  position: absolute;
  left: -9999px;
  top: -9999px;
}

/* The description at the top of the page */

#description {
  padding: 10px 10px 5px 10px;
  background: #111;
  color: #fff;
  width: 45em;
  margin: 0 auto -5px auto;
  text-align: center;
}

#description h1 {
  font-size: 14px;
}

#description a {
  color: #bbf;
}

</style>

<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="jquery-ui-1.8.2.custom.min.js"></script>

<script type="text/javascript">

var newImageZIndex = 1;  // To make sure newly-loaded images land on top of images on the table
var loaded = false;      // Used to prevent initPhotos() running twice

// When the document is ready, fire up the table!
$( init );

// When the wooden table image has loaded, start bringing in the photos
function init() {
  var woodenTable = $('#wooden-table img');
  woodenTable.load( initPhotos );

  // Hack for browsers that don't fire load events for cached images
  if ( woodenTable.get(0).complete ) $(woodenTable).trigger("load");
}

// Set up each of the photos on the table

function initPhotos() {

  // (Ensure this function doesn't run twice)
  if ( loaded ) return;
  loaded = true;

  // The table image has loaded, so bring in the table
  $('#lighttable').fadeIn('fast');

  // Process each photo in turn...
  $('#lighttable img').each( function(index) {

    // Set a random position and angle for this photo
    var left = Math.floor( Math.random() * 450 + 50 );
    var top = Math.floor( Math.random() * 100 + 50 );
    var angle = Math.floor( Math.random() * 60 - 30 );
    $(this).css( 'left', left+'px' );
    $(this).css( 'top', top+'px' );
    $(this).css( 'transform', 'rotate(' + angle + 'deg)' );   
    $(this).css( '-moz-transform', 'rotate(' + angle + 'deg)' );   
    $(this).css( '-webkit-transform', 'rotate(' + angle + 'deg)' );
    $(this).css( '-o-transform', 'rotate(' + angle + 'deg)' );

    // Make the photo draggable
    $(this).draggable( { containment: 'parent', stack: '#lighttable img', cursor: 'pointer' } );

    // Hide the photo for now, in case it hasn't finished loading
    $(this).hide();

    // When the photo image has loaded...
    $(this).load( function() {

      // (Ensure this function doesn't run twice)
      if ( $(this).data('loaded') ) return;
      $(this).data('loaded', true);

      // Record the photo's true dimensions
      var imgWidth = $(this).width();
      var imgHeight = $(this).height();

      // Make the photo bigger, so it looks like it's high above the table
      $(this).css( 'width', imgWidth * 1.5 );
      $(this).css( 'height', imgHeight * 1.5 );

      // Make it completely transparent, ready for fading in
      $(this).css( 'opacity', 0 );

      // Make sure its z-index is higher than the photos already on the table
      $(this).css( 'z-index', newImageZIndex++ );

      // Gradually reduce the photo's dimensions to normal, fading it in as we go
      $(this).animate( { width: imgWidth, height: imgHeight }, 1200 );
    } );

    // Hack for browsers that don't fire load events for cached images
    if ( this.complete ) $(this).trigger("load");

  });

}

  $(document).ready(function() {
    img = 0;
    delay = 4000;

    var go = setInterval(function() {
      console.log(img)
      $('#lighttable img:eq('+img+')').animate({opacity: 0.95}, delay * 0.5).delay(delay).fadeOut();
      img++;

      if (img >= $('#lighttable img').length) {
        clearInterval(go);
      }
    }, delay * 2);
  });

</script>

</head>
<body>

  <div id="wooden-table"><img src="images/wooden-table.jpg" alt="Wooden table image" /></div>

  <div id="description">
    <h1><span style="font-weight: normal;">C+J = Pretty Awesome</span></h1>
  </div>

  <div id="lighttable">
    <img src="slides/1.jpg" height="400" />
    <img src="slides/2.jpg" height="400" />
    <img src="slides/4.jpg" height="400" />
    <img src="slides/5.jpg" height="400" />
    <img src="slides/6.jpg" height="400" />
    <img src="slides/7.jpg" height="400" />
    <img src="slides/8.jpg" height="400" />
    <img src="slides/9.jpg" height="400" />
    <img src="slides/10.jpg" height="400" />
    <img src="slides/11.jpg" height="400" />
    <img src="slides/12.jpg" height="400" />
    <img src="slides/13.jpg" height="400" />
    <img src="slides/14.jpg" height="400" />
    <img src="slides/15.jpg" height="400" />
    <img src="slides/16.jpg" height="400" />
    <img src="slides/17.jpg" height="400" />
    <img src="slides/18.jpg" height="400" />
    <img src="slides/19.jpg" height="400" />
    <img src="slides/20.jpg" height="400" />
    <img src="slides/21.jpg" height="400" />
    <img src="slides/22.jpg" height="400" />
    <img src="slides/23.jpg" height="400" />
    <img src="slides/24.jpg" height="400" />
    <img src="slides/25.jpg" height="400" />
    <img src="slides/26.jpg" height="400" />
    <img src="slides/27.jpg" height="400" />
    <img src="slides/28.jpg" height="400" />
    <img src="slides/29.jpg" height="400" />
    <img src="slides/30.jpg" height="400" />
    <img src="slides/31.jpg" height="400" />
    <img src="slides/32.jpg" height="400" />
    <img src="slides/33.jpg" height="400" />
    <img src="slides/34.jpg" height="400" />
    <img src="slides/35.jpg" height="400" />
    <img src="slides/36.jpg" height="400" />
    <img src="slides/37.jpg" height="400" />
    <img src="slides/38.jpg" height="400" />
    <img src="slides/39.jpg" height="400" />
    <img src="slides/40.jpg" height="400" />
    <img src="slides/41.jpg" height="400" />
    <img src="slides/42.jpg" height="400" />
    <img src="slides/43.jpg" height="400" />
    <img src="slides/44.jpg" height="400" />
    <img src="slides/45.jpg" height="400" />
    <img src="slides/46.jpg" height="400" />
    <img src="slides/47.jpg" height="400" />
    <img src="slides/48.jpg" height="400" />
    <img src="slides/50.jpg" height="400" />
    <img src="slides/51.jpg" height="400" />
    <img src="slides/52.jpg" height="400" />
    <img src="slides/53.jpg" height="400" />
    <img src="slides/54.jpg" height="400" />
    <img src="slides/55.jpg" height="400" />
    <img src="slides/56.jpg" height="400" />
    <img src="slides/57.jpg" height="400" />
    <img src="slides/58.jpg" height="400" />
    <img src="slides/59.jpg" height="400" />
    <img src="slides/60.jpg" height="400" />
    <img src="slides/61.jpg" height="400" />
    <img src="slides/62.jpg" height="400" />
    <img src="slides/63.jpg" height="400" />
    <img src="slides/64.jpg" height="400" />
    <img src="slides/65.jpg" height="400" />
    <img src="slides/66.jpg" height="400" />
    <img src="slides/67.jpg" height="400" />
    <img src="slides/68.jpg" height="400" />
    <img src="slides/69.jpg" height="400" />
    <img src="slides/70.jpg" height="400" />
  </div>

</body>
</html>

